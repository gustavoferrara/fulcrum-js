{"version":3,"sources":["../src/client.js"],"names":["VERSION","require","version","BASE_URL","Client","token","opts","_opts","baseUrl","options","baseURI","headers","userAgent","tokenOptions","Object","assign","noTokenOptions","api","Fetcher","noTokenApi","path","base","urlFromPath","func","registerAuthenticationErrorHandler","_forms","Form","_records","Record","_changesets","Changeset","_choiceLists","ChoiceList","_classificationSets","ClassificationSet","_authorizations","Authorization","_memberships","Membership","_projects","Project","_layers","Layer","_photos","Photo","_videos","Video","_audio","Audio","_signatures","Signature","_roles","Role","_webhooks","Webhook","_query","_batch","Batch","_auditLogs","AuditLog"],"mappings":"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","file":"client.js","sourcesContent":["import Fetcher from './fetcher';\r\n\r\nimport Form from './resources/form';\r\nimport Record from './resources/record';\r\nimport Changeset from './resources/changeset';\r\nimport ChoiceList from './resources/choice-list';\r\nimport ClassificationSet from './resources/classification-set';\r\nimport Authorization from './resources/authorization';\r\nimport Membership from './resources/membership';\r\nimport Project from './resources/project';\r\nimport Layer from './resources/layer';\r\nimport Photo from './resources/photo';\r\nimport Video from './resources/video';\r\nimport Audio from './resources/audio';\r\nimport Signature from './resources/signature';\r\nimport Role from './resources/role';\r\nimport Webhook from './resources/webhook';\r\nimport AuditLog from './resources/audit-log';\r\nimport query from './resources/query';\r\nimport Batch from './resources/batch';\r\n\r\nconst VERSION = require('../package.json').version;\r\n\r\nconst BASE_URL = 'https://api.fulcrumapp.com/api/v2';\r\n\r\nexport default class Client {\r\n  constructor(token, opts) {\r\n    const _opts = opts || {};\r\n\r\n    this.baseUrl = _opts.baseUrl || BASE_URL;\r\n\r\n    this.version = VERSION;\r\n\r\n    const options = {\r\n      baseURI: this.baseUrl,\r\n      headers: {\r\n        'Accept': 'application/json',\r\n        'Content-Type': 'application/json',\r\n        'User-Agent': _opts.userAgent || `fulcrum-js version ${VERSION}`\r\n      }\r\n    };\r\n\r\n    const tokenOptions = Object.assign({}, options);\r\n    tokenOptions.headers['X-ApiToken'] = token;\r\n    const noTokenOptions = Object.assign({}, options);\r\n\r\n    this.api = new Fetcher(tokenOptions);\r\n    this.noTokenApi = new Fetcher(noTokenOptions);\r\n  }\r\n\r\n  urlFromPath(path, base) {\r\n    return (base || this.baseUrl) + '/' + path;\r\n  }\r\n\r\n  url(path, base) {\r\n    return this.urlFromPath(path, base);\r\n  }\r\n\r\n  get forms() {\r\n    if (!this._forms) {\r\n      this._forms = new Form(this);\r\n    }\r\n    return this._forms;\r\n  }\r\n\r\n  get records() {\r\n    if (!this._records) {\r\n      this._records = new Record(this);\r\n    }\r\n    return this._records;\r\n  }\r\n\r\n  get changesets() {\r\n    if (!this._changesets) {\r\n      this._changesets = new Changeset(this);\r\n    }\r\n    return this._changesets;\r\n  }\r\n\r\n  get choiceLists() {\r\n    if (!this._choiceLists) {\r\n      this._choiceLists = new ChoiceList(this);\r\n    }\r\n    return this._choiceLists;\r\n  }\r\n\r\n  get classificationSets() {\r\n    if (!this._classificationSets) {\r\n      this._classificationSets = new ClassificationSet(this);\r\n    }\r\n    return this._classificationSets;\r\n  }\r\n\r\n  get authorizations() {\r\n    if (!this._authorizations) {\r\n      this._authorizations = new Authorization(this);\r\n    }\r\n    return this._authorizations;\r\n  }\r\n\r\n  get memberships() {\r\n    if (!this._memberships) {\r\n      this._memberships = new Membership(this);\r\n    }\r\n    return this._memberships;\r\n  }\r\n\r\n  get projects() {\r\n    if (!this._projects) {\r\n      this._projects = new Project(this);\r\n    }\r\n    return this._projects;\r\n  }\r\n\r\n  get layers() {\r\n    if (!this._layers) {\r\n      this._layers = new Layer(this);\r\n    }\r\n    return this._layers;\r\n  }\r\n\r\n  get photos() {\r\n    if (!this._photos) {\r\n      this._photos = new Photo(this);\r\n    }\r\n    return this._photos;\r\n  }\r\n\r\n  get videos() {\r\n    if (!this._videos) {\r\n      this._videos = new Video(this);\r\n    }\r\n\r\n    return this._videos;\r\n  }\r\n\r\n  get audio() {\r\n    if (!this._audio) {\r\n      this._audio = new Audio(this);\r\n    }\r\n\r\n    return this._audio;\r\n  }\r\n\r\n  get signatures() {\r\n    if (!this._signatures) {\r\n      this._signatures = new Signature(this);\r\n    }\r\n\r\n    return this._signatures;\r\n  }\r\n\r\n  get roles() {\r\n    if (!this._roles) {\r\n      this._roles = new Role(this);\r\n    }\r\n\r\n    return this._roles;\r\n  }\r\n\r\n  get webhooks() {\r\n    if (!this._webhooks) {\r\n      this._webhooks = new Webhook(this);\r\n    }\r\n\r\n    return this._webhooks;\r\n  }\r\n\r\n  get query() {\r\n    if (!this._query) {\r\n      this._query = query(this);\r\n    }\r\n\r\n    return this._query;\r\n  }\r\n\r\n  get batch() {\r\n    if (!this._batch) {\r\n      this._batch = new Batch(this);\r\n    }\r\n\r\n    return this._batch;\r\n  }\r\n\r\n  get auditLogs() {\r\n    if (!this._auditLogs) {\r\n      this._auditLogs = new AuditLog(this);\r\n    }\r\n\r\n    return this._auditLogs;\r\n  }\r\n\r\n  registerAuthenticationErrorHandler(func) {\r\n    this.api.registerAuthenticationErrorHandler(func);\r\n  }\r\n}\r\n"]}